"use strict";var loadFiles={js:[],css:[]},_prevent_scroll=!(window.pivot={init:init});function init(e){var t,n,o="ontouchstart"in window||"onmsgesturechange"in window||!!navigator.MaxTouchPoints,s=0,a=0;if(void 0!==e&&"object"==typeof e&&("touch"in e&&(o=e.touch),"selector"in e&&(t=document.querySelectorAll(e.selector)),0<t.length))for(s=t.length;a<s;a++)handleHover(n=t[a],n.parentNode,e,o)}function handleHover(p,u,h,v){var g,y,f=0,e=getProp(["perspective","webkitPerspective","mozPerspective"]),t=getProp(["transformStyle","webkitTransformStyle","mozTransformStyle"]),b=getProp(["transform","webkitTransform","mozTransform"]),n=getProp(["backfaceVisibility","webkitBackfaceVisibility","mozBackfaceVisibility"]),o=getProp(["willChange"]),w=getProp(["boxShadow","webkitBoxShadow","mozBoxShadow"]),s=getProp(["userSelect","webkitUserSelect","mozUserSelect"]),a=getProp(["transitionProperty","webkitTransitionProperty","mozTransitionProperty"]),i=getProp(["transitionDuration","webkitTransitionDuration","mozTransitionDuration"]),r=(getProp(["transitionDelay","webkitTransitionDelay","mozTransitionDelay"]),getProp(["transitionTimingFunction","webkitTransitionTimingFunction","mozTransitionTimingFunction"]));if(h.perspective&&"number"==typeof h.perspective?(u.style[e]=h.perspective+"px",p.style[e]=h.perspective+"px"):(u.style[e]="1000px",p.style[e]="1000px"),u.style[t]="preserve-3d",p.style[t]="preserve-3d",u.style[s]="none",p.style[s]="none",p.style[b]="rotateY(0deg) rotateX(0deg)",f=h.sensitivity&&"number"==typeof h.sensitivity?h.sensitivity:20,v&&(p.style[n]="hidden"),h.position&&"object"==typeof h.position?(p.style.position=h.position.method,p.style.zIndex=h.position.zindex):p.style.position="relative",h.transition&&"object"==typeof h.transition?(p.style[o]=h.transition.prop,p.style[a]=h.transition.prop,p.style[i]=getUnit(h.transition.duration),p.style[r]=getTFunc(h.transition.timing)):(p.style[o]="transform",p.style[a]="transform",p.style[i]="0.2s",p.style[r]="cubic-bezier(0.3, 1, 0.2, 1)"),h.shadow&&((g=document.createElement("div")).className="shadow",g.style.position="absolute",g.style.top="5%",g.style.left="5%",g.style.bottom="5%",g.style.right="5%",g.style.zIndex=1,g.style[b]="translateZ(-2px)",g.style[w]="0 8px 30px rgba(14, 21, 47, 0.6)",h.transition&&"object"==typeof h.transition?(g.style[o]="box-shadow, transform",g.style[a]="box-shadow",g.style[i]=getUnit(h.transition.duration),g.style[r]=getTFunc(h.transition.timing)):(g.style[o]="box-shadow, transform",g.style[a]="box-shadow",g.style[i]="0.2s",g.style[r]="cubic-bezier(0.3, 1, 0.2, 1)"),p.appendChild(g)),h.shine&&((y=document.createElement("div")).className="shine",y.style.position="absolute",y.style.top=0,y.style.left=0,y.style.bottom=0,y.style.right=0,y.style.zIndex=9,y.style.opacity=0,h.transition&&"object"==typeof h.transition?(y.style[o]="opacity, transform",y.style[a]="opacity",y.style[i]=getUnit(h.transition.duration),y.style[r]=getTFunc(h.transition.timing)):(y.style[o]="box-shadow, transform",y.style[a]="box-shadow",y.style[i]="0.2s",y.style[r]="cubic-bezier(0.3, 1, 0.2, 1)"),p.appendChild(y)),h.child3D&&"number"==typeof h.child3D)for(var l=_target.children.length,c=0;c<l;c++)h.shadow&&p.children[c].className===g.className||h.shine&&p.children[c].className===y.className||(p.children[c].style[b]="translateZ("+h.child3D+"px)");function d(){h.hoverClass&&h.hoverInClass?(p.className+=" "+h.hoverClass+" "+h.hoverInClass,setTimeout(function(){p.className=removeClass(p.className,h.hoverInClass)},1e3)):h.hoverClass?p.className+=" "+h.hoverClass:h.hoverInClass&&(p.className+=" "+h.hoverInClass,setTimeout(function(){p.className=removeClass(p.className,h.hoverInClass)},1e3))}function m(e){var t=u.offsetWidth,n=u.offsetHeight,o=p.getBoundingClientRect(),s=v?e.touches[0].clientX-o.left:e.offsetX,a=v?e.touches[0].clientY-o.top:e.offsetY,i=h.invert?-(t/2-s)/f:(t/2-s)/f,r=h.invert?(n/2-a)/f:-(n/2-a)/f,l=a-n/2,c=s-t/2,d=Math.atan2(l,c)*(180/Math.PI)-90,m=d<0?360+d:d;h.scale?p.style[b]="rotateY("+i+"deg) rotateX("+r+"deg) scale3d(1.05, 1.05, 1.05)":p.style[b]="rotateY("+i+"deg) rotateX("+r+"deg)",h.shadow&&(g.style[w]="0 24px 48px rgba(14, 21, 47, 0.4), 0 12px 24px rgba(14, 21, 47, 0.4)"),h.shine&&(y.style.opacity=1,y.style.backgroundImage="linear-gradient("+m+"deg, rgba(230, 230, 230, "+a/n*.5+") 0%, transparent 80%)")}function C(){h.shadow&&(g.style[w]="0 8px 30px rgba(14, 21, 47, 0.6)"),h.persist||(p.style[b]="rotateX(0deg) rotateY(0deg)",h.shine&&(y.style.opacity=0)),h.hoverClass&&h.hoverOutClass?(p.className+=" "+h.hoverOutClass,p.className=removeClass(p.className,h.hoverClass),setTimeout(function(){p.className=removeClass(p.className,h.hoverOutClass)},1e3)):h.hoverClass?p.className=removeClass(p.className,h.hoverClass):h.hoverOutClass&&(p.className+=" "+h.hoverOutClass,setTimeout(function(){p.className=removeClass(p.className,h.hoverOutClass)},1e3))}v?(u.addEventListener("touchstart",function(){return _prevent_scroll=_prevent_scroll||!0,d()}),u.addEventListener("touchmove",function(e){return _prevent_scroll&&e.preventDefault(),m(e)}),u.addEventListener("touchend",function(){return _prevent_scroll&&(window.preventScroll=!1),C()})):(u.addEventListener("mouseenter",function(){return d()}),u.addEventListener("mousemove",function(e){return m(e)}),u.addEventListener("mouseleave",function(){return C()}))}function getProp(e){for(var t=e.length,n=0;n<t;n++)if(void 0!==document.body.style[e[n]])return e[n];return null}function getUnit(e){return"number"!=typeof e?(console.warn("Please provide a numeric value"),"0.2s"):1<e&&e<=50?"0."+e+"s":50<e?e+"ms":e+"s"}function getTFunc(e){var t=e.length;return e.constructor!==Array?(console.warn("Bad input: expected array"),"none"):4===t?"number"==typeof e[0]&&"number"==typeof e[1]&&"number"==typeof e[2]&&"number"==typeof e[3]?"cubic-bezier("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")":(console.warn("Bad input: expected numbers"),"none"):(console.warn("Bad input: expected four values"),"none")}function removeClass(e,t){var n=new RegExp(t+"\\s*","gi");return e.replace(n,"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function rebounce(e){var t,n,o,s,a;return function(){for(n=this,o=[],s=arguments.length,a=0;a<s;++a)o[a]=arguments[a];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(function(){e.apply(n,o),t=null})}}function loadScript(e,t,n){n=n||"body",t=t||function(){};var o=null;(o=document.createElement("script")).type="text/javascript",o.src=e,o.onload=function(){loadFiles.js.push(e),t()},"head"===n?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)}function loadCSS(e,t,n){n=n||"head",t=t||function(){};var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.onload=o.onreadystatechange=function(){loadFiles.css.push(e),t()},o.href=e,"head"===n?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)}function initTheme(){var e=null!==localStorage.getItem("darkSwitch")&&"dark"===localStorage.getItem("darkSwitch");(darkSwitch.checked=e)?(document.body.setAttribute("data-theme","dark"),document.querySelector(".dark-switch-label-span").innerHTML='<i class="fas fa-sun"></i>'):(document.body.removeAttribute("data-theme"),document.querySelector(".dark-switch-label-span").innerHTML='<i class="fas fa-moon"></i>')}function resetTheme(){darkSwitch.checked?(document.body.setAttribute("data-theme","dark"),document.querySelector(".dark-switch-label-span").innerHTML='<i class="fas fa-sun"></i>',localStorage.setItem("darkSwitch","dark")):(document.body.removeAttribute("data-theme"),document.querySelector(".dark-switch-label-span").innerHTML='<i class="fas fa-moon"></i>',localStorage.removeItem("darkSwitch"))}function isScrollTop(){return $(document).scrollTop()<=0}function log(){console.log("已经动态加载资源：",loadFiles)}function initPage(){if($(function(){isScrollTop()?n():o(),$(window).scroll(function(){isScrollTop()?n():o()}),$(".navbar-toggler").click(function(e){"false"===$(this).attr("aria-expanded")?(isScrollTop()&&$("nav.navbar").removeClass(["navbar-dark","top-nav"]).addClass("navbar-light"),$("html").addClass("overflow-hidden")):(isScrollTop()&&$("nav.navbar").addClass(["navbar-dark","top-nav"]).removeClass("navbar-light"),$("html").removeClass("overflow-hidden"))});var e=$("#return-to-top");$(window).scroll(function(){50<=$(this).scrollTop()?e.addClass("bounceInRight").removeClass("bounceOutDown"):e.removeClass("bounceInRight").addClass("bounceOutDown")}),e.click(function(){$("body,html").animate({scrollTop:0},500)})}),pivot.init({selector:".site-post-list .post-card-image-link",sensitivity:80,touch:!1}),null!==document.querySelector(".post-content pre code")&&(void 0===window.Prism?(loadCSS("//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism-tomorrow.min.css"),loadScript("//cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js",function(){loadScript("//cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js",function(){$(".post-content pre code").attr("class",function(e,t){if(void 0!==t)return t.replace(/language-html/g,"language-markup")}),"undefined"!==window.Prism&&(Prism.plugins.autoloader.languages_path="//cdn.jsdelivr.net/npm/prismjs/components/",Prism.highlightAll())})}),loadCSS("//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css"),loadScript("//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"),$(".post-content pre").addClass("line-numbers"),loadCSS("//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css"),loadScript("//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"),loadScript("//cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"),loadScript("//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"),loadScript("//cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js")):($(".post-content pre code").attr("class",function(e,t){if(void 0!==t)return t.replace(/language-html/g,"language-markup")}),"undefined"!==window.Prism&&(Prism.plugins.autoloader.languages_path="//cdn.jsdelivr.net/npm/prismjs/components/",Prism.highlightAll()),$(".post-content pre").addClass("line-numbers"))),0!==$(".post-content img").length){var e=function(){var e=mediumZoom(document.querySelectorAll(".post-content img"),{background:"#fff"});e.on("open",function(e){}),e.detach("img.kg-bookmark-icon",".kg-bookmark-thumbnail img")};void 0===window.mediumZoom?loadScript("//cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js",function(){e()}):e()}var t=document.getElementById("darkSwitch");function n(){$("nav.navbar").addClass("top-nav").addClass("navbar-dark").removeClass("navbar-light")}function o(){$("nav.navbar").removeClass("top-nav").removeClass("navbar-dark").addClass("navbar-light")}t&&(initTheme(),t.addEventListener("change",function(e){resetTheme()})),Boolean(localStorage.noPopUp)?$("#toast").toast("hide"):($("#toast").toast({autohide:!0,delay:5e3}).toast("show"),$("#toast .close").click(function(){localStorage.setItem("noPopUp",!0)}))}initPage(),window.onload=function(){log()};